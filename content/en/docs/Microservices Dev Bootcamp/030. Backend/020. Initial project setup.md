---
type: docs
title: "Initial project setup"
linkTitle: "Initial project setup"
weight: 20
description: >
  Set up the project in the bc###-theatermanagement-bff repo.
---

Create a branch "feature/wipe-away-everything"

## Wipe away everything

TODO: Provide these steps

Once you're done, all that's left is:
 - The solution
 - The pipeline
 - `.gitignore`

Commit with comment "Wiped away almost everything"

PR, approve, merge.

Create a branch "feature/initial-setup"

## Create the csproj

 - Create a C# ASP.NET Core API project.
   - Project name: Bc###TheaterManagementBff
   - Location: C:\src\onbe\Bc###TheaterManagementBff\src
   - Target framework: .NET 5.0
   - Authentication type: None
   - Configure for HTTPS: No
   - Enable Docker: No
   - Enable OpenAPI support: Yes

Commit with comment "Created Bc###TheaterManagementBff csproj"

## Add Docker Compose orchestration

TODO: Describe why we're doing this and maybe add some links.

 - Right-click on the project
 - **Add** > **Container Orchestrator Support...**
 - Container orchestrator: Docker Compose
 - Target OS: Linux

At this point we'd inspect the changes made to:

~~~
src/Bc###TheaterManagementBff/Properties/launchSettings.json
src/Bc###TheaterManagementBff/Dockerfile
src/Bc###TheaterManagementBff/Bc###TheaterManagementBff.csproj
docker-compose.yml
docker-compose.override.yml
~~~

Commit with comment "Docker Compose orchestration"


## Expose a port for local development

TODO: For the backend version of this file, changes this to 30001

30000 will do.

Edit `docker-compose.override.yml`:
~~~
    ports:
      - "80"
~~~
becomes
~~~
    ports:
      - "30000:80"
~~~

Commit with comment "Exposed a port for local development"

## Remove the autogenerated WeatherForecast stuff

Delete:
  - `src/Controllers/WeatherForecastController.cs`
  - `src/WeatherForecast.cs`

Commit with comment "Removed the autogenerated WeatherForecast stuff"

### Open up CORS for local development

For local development, we'll open up CORS so there are no obstacles.

Modify `Startup.cs`
~~~
...
        public void ConfigureServices(IServiceCollection services)
        {
...
            services.AddCors();
        }
...
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment())
            {
...
                app.UseCors(builder => builder
                    .AllowAnyOrigin()
                    .AllowAnyMethod()
                    .AllowAnyHeader()
                    );
            }
...
~~~

Commit with comment "Opened up CORS for local development"

## Dummy data for GET /movies

src/Bc###TheaterManagementBff/Models/Movie.cs
~~~
namespace Bc###TheaterManagementBff.Models
{
    public record Movie(string id, string title);
}
~~~

src/Bc###TheaterManagementBff/Controllers/MoviesController.cs
~~~
...
    [ApiController]
    [Route("movies")]
    public class MoviesController : ControllerBase
    {
        private readonly ILogger<MoviesController> _logger;
        private readonly HttpClient _httpClient;

        public MoviesController(ILogger<MoviesController> logger, HttpClient httpClient)
        {
            _logger = logger;
            _httpClient = httpClient;
        }

        [HttpGet]
        public IEnumerable<Movie> Get()
        {
            var movies = new Movie[]
            {
                new Movie(id: "tt0076759", title: "Star Wars: Episode IV - A New Hope"),
                new Movie(id: "tt0193524", title: "The Star Wars Holiday Special")
            };
            return movies.ToArray();
        }
    }
...
~~~

Commit with comment "Added dummy data for GET /movies"

## All done!

PR, approve, merge.
